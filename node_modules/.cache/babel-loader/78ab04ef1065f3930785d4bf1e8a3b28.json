{"ast":null,"code":"'use strict';\n\nvar Farm = require('./farm');\nvar farms = []; // keep record of farms so we can end() them if required\n\nfunction farm(options, path, methods) {\n  if (typeof options == 'string') {\n    methods = path;\n    path = options;\n    options = {};\n  }\n  var f = new Farm(options, path),\n    api = f.setup(methods);\n  farms.push({\n    farm: f,\n    api: api\n  });\n\n  // return the public API\n  return api;\n}\nfunction end(api, callback) {\n  for (var i = 0; i < farms.length; i++) {\n    if (farms[i] && farms[i].api === api) return farms[i].farm.end(callback);\n  }\n  process.nextTick(callback.bind(null, new Error('Worker farm not found!')));\n}\nmodule.exports = farm;\nmodule.exports.end = end;","map":null,"metadata":{},"sourceType":"script"}